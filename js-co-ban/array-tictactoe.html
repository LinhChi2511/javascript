<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>tic tắc toe</title>
</head>
<body>
<script>
    const arr = [];
    let isX = true;

    // khởi tạo mảng 2 chiều, 5 hàng 5 cột
    for (let i = 0; i<5; i++){
        // khởi tạo arr[i] là 1 mảng
        arr[i] = [];
        for (let j = 0;  j < 5; j++){
            arr[i][j] = "";
        }
    }

    // hiển thị bàn cờ
    let board = "<table border='1' style='width: 500px; height: 500px'>";
    for (let i=0; i<5; i++){
        board +="<tr>";
        for (let j=0;j<5;j++){
            board += `<td onclick="changeValue(${i},${j})">${arr[i][j]}</td>`
        }
        board +="</tr>"
    }
    board += "</table>"
    document.write(board);

    function changeValue(i,j){
        if (arr[i][j] === ""){
            if (isX){
                arr[i][j] = "X";
                isX = false;
            } else {
                arr[i][j]= "O";
                isX = true;
            }
            let board = "<table border='1' style='width: 500px; height: 500px'>";
            for (let i=0; i<5; i++){
                board +="<tr>";
                for (let j=0;j<5;j++){
                    board += `<td onclick="changeValue(${i}, ${j})" style="width: 100px; height: 100px; text-align: center; font-size: 30px">${arr[i][j]}</td>`
                }
                board +="</tr>"
            }
            board += "</table>"
        //     clear phần body trước khi vẽ lại
            document.body.innerHTML = "";
            document.write(board);
            checkWin();
        }
    }
    function checkWin() {
        for (let i = 0; i < 5; i++) {
            for (let j = 0; j < 5; j++) {
                if (arr[i][j]!==""){
                    if (arr[i][j] === arr[i][j + 1] && arr[i][j + 1] === arr[i][j + 2]) {
                        alert(arr[i][j] + " win")
                        //     nếu 3 ô nằm ngang giống nhau và khác rỗng thì thắng
                    }
                    if (arr[i][j] === arr[i+1][j] && arr[i+2][j]=== arr[i+1][j]){
                        alert(arr[i][j] + " win");
                        //     nếu 3 ô nằm dọc giống nhau và khác rỗng thì thắng
                    }
                    if (arr[i][j] === arr[i+1][j+1] && arr[i+1][j+1]=== arr[i+2][j+2]){
                        alert(arr[i][j] + " win");
                    }
                }
            }
        }
    }
</script>
</body>
</html>